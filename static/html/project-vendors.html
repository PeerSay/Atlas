<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3 tile-container" ng-controller="ProjectVendorsCtrl as cm">
    <div class="panel panel-default tile clickable"
            ng-class="{'panel-primary': tile.highlight}"
            ng-mouseover="tile.highlight = true"
            ng-mouseleave="tile.highlight = false"
            ng-click="cm.showFullView()"
            >
        <div class="panel-heading">
            <h3 class="panel-title">{{cm.tile.title}}</h3>
        </div>
        <div class="panel-body">
            <div class="view-mode" ng-class="m.viewMode.value">
                <!--Normal view-->
                <div class="tile-section norm border">
                    <ps-table-view ps-view="cm.normalTableView"></ps-table-view>
                </div>
                <!--Minimal view-->
                <div class="tile-section min">
                    <div>TODO - minimal</div>
                    <div>How to select 2 rows?</div>
                </div>
            </div>
        </div>
    </div>

    <!--Full view-->
    <div class="modal fade full-view" tabindex="-1" role="dialog"
            ps-tile-dialog
            ps-dlg-uri="tile.uri"
            ps-toggle="cm.fullView"
            ps-on-show="cm.onFullView">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span><span class="sr-only">Close</span>
                    </button>
                    <!--Table menu / popover-->
                    <ps-table-popover class="header-btn last"
                            ps-cont-selector=".modal-header"
                            ps-id="table"
                            ps-popover-on="cm.popoverOn">
                        <span class="popover-icon hamburger-icon">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </span>
                        <form class="popover-form">
                            <div class="form-group">
                                <label>Group by:</label>
                                <div class="list-group">
                                    <a href class="list-group-item"
                                            ng-repeat="opt in cm.groupBy.options"
                                            ng-class="{'active': opt === cm.groupBy.current}"
                                            ng-click="cm.groupBy.set(opt)">
                                        {{cm.groupBy.displayName(opt)}}
                                    </a>
                                </div>
                            </div>
                        </form>
                    </ps-table-popover>
                    <a class="btn btn-default header-btn export"
                            ng-mousedown="csv.generate()"
                            ng-href="{{ csv.link() }}"
                            download="requirements.csv">Export</a>
                    <h4 class="modal-title">
                        {{tile.title}}
                        <small ng-show="cm.savingData">Saving...</small>
                    </h4>
                </div>
                <div class="modal-body">
                    <div class="tile-section border">
                        <ps-table-view ps-view="cm.fullTableView"></ps-table-view>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary pull-right" data-dismiss="modal">Done</button>
                </div>
            </div>
        </div>

        <!--Menu-->
        <div ng-attr-id="{{::cm.menu.id}}" class="context-menu dropdown clearfix">
            <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">
                <li>
                    <a class="pointer" role="menuitem" tabindex="-1"
                            ng-click="cm.menu.addProduct()">Add Product</a>
                </li>
                <li>
                    <a class="pointer" role="menuitem" tabindex="-1"
                            ng-click="cm.menu.removeProduct()">Remove Product</a>
                </li>
            </ul>
        </div>
    </div>
</div>
