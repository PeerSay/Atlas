<table class="table"
        ng-init="view = cm.normalView"
        ng-table="cm.normalView.tableParams"
        ng-class="{ 'ng-table-resizable-columns': false }"
        ng-attr-data-resizable-columns-id="{{ false && 'psTable' }}"
        >
    <thead>
    <tr>
        <th ng-repeat="col in view.columns"
                ng-class="view.sortingClass(col)"
                ng-click="view.sortBy(col)"
                >
            <div>{{col.title}}</div>
            <!--TODO: control-->
        </th>
        <!--<th class="sortable"
                ng-class="cm.tableSortClass(cm.fullTableParams, 'name')"
                ng-click="cm.tableSortClick(cm.fullTableParams, 'name')"
                data-resizable-column-id="name"
                >
            <div>{{::cm.titles[0]}}</div>
        </th>
        <th class="sortable"
                ng-class="cm.tableSortClass(cm.fullTableParams, 'description')"
                ng-click="cm.tableSortClick(cm.fullTableParams, 'description')"
                data-resizable-column-id="description"
                >
            <div>{{::cm.titles[1]}}</div>
        </th>
        <th ng-if="!cm.compactTable"
                class="sortable"
                ng-class="cm.tableSortClass(cm.fullTableParams, 'group')"
                ng-click="cm.tableSortClick(cm.fullTableParams, 'group')"
                >
            <div>{{::cm.titles[2]}}</div>
        </th>
        <th ng-if="!cm.compactTable"
                class="sortable"
                ng-class="cm.tableSortClass(cm.fullTableParams, 'priority')"
                ng-click="cm.tableSortClick(cm.fullTableParams, 'priority')"
                >
            <div>{{::cm.titles[3]}}</div>
        </th>
        <th class="table-menu">
            <ps-table-popover
                    ps-cont-selector="th"
                    ps-id="table"
                    ps-popover-on="cm.popoverOn">
                <span class="popover-icon hamburger-icon">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </span>
                <form class="popover-form">
                    <div class="form-group">
                        <label class="checkbox-ext no-select text-nowrap block">
                            <input type="checkbox"
                                    ng-model="cm.compactTable"
                                    ng-click="cm.reloadTables()">
                            Compact view
                        </label>
                    </div>

                    <div class="form-group">
                        <label>Group by:</label>
                        <div class="list-group">
                            <a href class="list-group-item"
                                    ng-repeat="opt in cm.groupByOptions"
                                    ng-class="{'active': opt === cm.groupBy}"
                                    ng-click="cm.selectGroupBy(opt)">
                                {{opt || 'none' | capitalize}}
                            </a>
                        </div>
                        <span class="hint" ng-show="criteria.newGroup.show">Press enter</span>
                    </div>
                </form>
            </ps-table-popover>
        </th>-->
    </tr>
    </thead>
    <tbody ng-repeat="group in $groups">
    <tr class="ng-table-group" ng-show="group.value">
        <td colspan="{{view.columns.length}}">
            <a href ng-click="group.$hideRows = !group.$hideRows" tabindex="-1">
                <span class="glyphicon" ng-class="{ 'glyphicon-chevron-right': group.$hideRows, 'glyphicon-chevron-down': !group.$hideRows }"></span>
                {{group.value}}
            </a>
        </td>
    </tr>
    <tr ng-hide="group.$hideRows" ng-repeat="row in group.data"
            context-menu="cm.setCriteriaOfMenu(criteria)"
            data-target="context-menu">
        <td ng-repeat="col in view.columns">
            {{ row[col.field] }}
        </td>
        <!--<td sortable="'name'" ng-class="{'edited': criteria.edit === 'name'}">
            <textarea class="form-control noresize"
                    msd-elastic
                    ng-model="criteria.name"
                    ng-focus="criteria.edit = 'name'"
                    ng-blur="criteria.edit = false; cm.updateModel()"
                    ps-focus-on="criteria.edit === 'name'"
                    ></textarea>
        </td>
        <td sortable="'description'" ng-class="{'edited': criteria.edit === 'description'}">
            <textarea class="form-control noresize"
                    msd-elastic
                    ng-model="criteria.description"
                    ng-focus="criteria.edit = 'description'"
                    ng-blur="criteria.edit = false; cm.updateModel()"
                    ps-focus-on="criteria.edit === 'description'"
                    ng-keydown="cm.criteriaKeyPressed(criteria, $event)"
                    ></textarea>
        </td>
        <td class="static"
                ng-if="!cm.compactTable"
                sortable="'group'">{{criteria.group}}</td>
        <td class="static"
                ng-if="!cm.compactTable"
                sortable="'priority'">{{criteria.priority}}</td>
        &lt;!&ndash;Settings Popover&ndash;&gt;
        <td>
            <ps-table-popover
                    ps-cont-selector="td"
                    ps-id="{{group.value + '_crit_' + $index}}"
                    ps-popover-on="cm.popoverOn"
                    ps-allow-hide="!criteria.newGroup.show"
                    >
                <span class="popover-icon glyphicon glyphicon-cog"></span>
                <form class="popover-form">
                    <div class="form-group">
                        <label class="checkbox-ext no-select text-nowrap block">
                            <input type="checkbox"
                                    ng-model="criteria.priority"
                                    ng-true-value="'required'"
                                    ng-false-value="'optional'"
                                    ng-click="cm.reloadTables(true)">
                            Required criteria
                        </label>
                    </div>

                    <div class="form-group">
                        <label>Select group:</label>
                        <div class="list-group">
                            <a href class="list-group-item"
                                    ng-repeat="group in cm.groups"
                                    ng-class="{'active': group === criteria.group}"
                                    ng-click="cm.setCriteriaGroup(criteria, group)">
                                <span class="glyphicon glyphicon-ok" ng-show="group === criteria.group"></span>
                                {{group || 'None'}}
                            </a>
                            <a href class="list-group-item"
                                    ng-click="criteria.newGroup.show = true">
                                <div class="create-new" ng-show="!criteria.newGroup.show">Create new...</div>
                                <input type="text" class="form-control" placeholder="Group name"
                                        ng-model="criteria.newGroup.value"
                                        ng-show="criteria.newGroup.show"
                                        ps-focus-on="criteria.newGroup.show"
                                        ng-keypress="cm.groupKeyPressed(criteria, $event)"
                                        ng-keydown="cm.groupKeyPressed(criteria, $event)"
                                        ng-blur="cm.groupDone(criteria)">
                            </a>
                        </div>
                        <span class="hint" ng-show="criteria.newGroup.show">Press enter</span>
                    </div>
                </form>
            </ps-table-popover>
        </td>-->
    </tr>
    </tbody>
</table>