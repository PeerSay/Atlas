<div class="container-fluid">
    <div class="row">
        <!--Left side-bar: Summary-->
        <div class="col-xs-12 col-sm-2">
            <!--Title-->
            <h3 class="page-title toggle-edit">
                <a class="toggle-value"
                        ui-sref=".essentials({edit: 'reasons'})"
                        data-placement="right"
                        ps-tooltip
                        ps-tooltip-title="cm.project.reasons">
                    <span class="fa fa-cubes"></span>
                    {{ cm.project.title }}
                    <span class="fa fa-edit hover-edit"></span>
                </a>
            </h3>
            <ul>
                <!--Budget-->
                <li ng-if="cm.project.resources.budget">
                    <span class="fa fa-fw fa-{{ cm.project.resources.budgetCurrency | lowercase }}"></span>
                    <a class="side-text ellipsis"
                            ui-sref=".essentials({edit: 'budget'})">
                        {{ cm.project.resources.budget }}
                    </a>
                </li>
                <!--Resources-->
                <li ng-if="cm.project.resources.description">
                    <span class="fa fa-fw fa-users"></span>
                    <a class="side-text ellipsis"
                            ui-sref=".essentials({edit: 'resources'})">
                        {{ cm.project.resources.description }}
                    </a>
                </li>
                <!--Time frame-->
                <li ng-if="cm.project.time.duration || cm.project.time.startDate">
                    <span class="fa fa-fw fa-clock-o"></span>
                    <a class="side-text ellipsis"
                            ui-sref=".essentials({edit: cm.project.time.duration && 'duration' || 'startDate'})">
                        <span ng-if="cm.project.time.duration" >
                            {{ cm.project.time.duration }} {{ cm.project.time.durationLabel }}
                        </span>
                        <span ng-if="cm.project.time.startDate">
                            @ {{ cm.project.time.startDate }}
                        </span>
                    </a>
                </li>
            </ul>
            <hr>

            <!--Products-->
            <h4 class="toggle-edit">
                <a class="toggle-value" ui-sref=".products">
                    Products <span class="fa fa-edit hover-edit"></span>
                </a>
            </h4>
            <ul>
                <li ng-repeat="product in cm.products">
                    <span class="side-text ellipsis">{{ product.name }}</span>
                </li>
            </ul>
            <hr>

            <!--Criteria-->
            <h4 class="toggle-edit">
                <a class="toggle-value" ui-sref=".requirements">
                    Criteria <span class="fa fa-edit hover-edit"></span>
                </a>
            </h4>
            <ul>
                <li ng-repeat="req in cm.requirements | filter:{selected: true} track by req.id">
                    <span class="side-text ellipsis">{{ req.name }}</span>
                </li>
            </ul>
        </div>

        <!--Center Col-->
        <div class="col-xs-12 col-sm-10">
            <!--MainTable-->
            <div class="row">
                <div class="col-xs-12 page-spacer" ng-controller="ProjectTableCtrl as cm">
                    <div class="tile-section border">
                        <ps-table-view ps-view="cm.tableView"></ps-table-view>
                    </div>
                </div>
            </div>
            <!--Summary / Notes-->
            <div class="row">
                <!--Summary / Recommendations-->
                <div class="col-xs-12 col-sm-6 tile-container">
                    <div class="panel panel-default tile">
                        <div class="panel-body">
                            <ps-edit-inline
                                    data-label="Summary"
                                    data-model="cm.fields.summary"
                                    data-on-save="cm.updateField(cm.fields.summary)"></ps-edit-inline>
                            <ps-edit-inline
                                    data-label="Recommendations"
                                    data-model="cm.fields.recommendations"
                                    data-on-save="cm.updateField(cm.fields.recommendations)"></ps-edit-inline>
                        </div>
                    </div>
                </div>
                <!--Notes-->
                <div class="col-xs-12 col-sm-6 tile-container">
                    <div class="panel panel-default tile">
                        <div class="panel-body">
                            <ps-edit-inline
                                    data-label="Notes"
                                    data-model="cm.fields.notes"
                                    data-on-save="cm.updateField(cm.fields.notes)"></ps-edit-inline>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--Dialog-->
    <div ui-view></div>

    <!--DBG-->
    <div class="row debug">
        <pre class="col-xs-12">
          $state = {{$state.current.name}}
          $stateParams = {{$stateParams}}
          $state full url = {{ $state.$current.url.source }}
        </pre>
    </div>
</div>
