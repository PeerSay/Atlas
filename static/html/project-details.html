<div class="container-fluid" ng-controller="ProjectDetailsCtrl as m">
    <!--Project Progress / Wizard-->
    <div class="row">
        <nav class="col-xs-10 col-xs-offset-1 col-sm-10 col-md-10 col-lg-10 project-progress">
            <ul class="nav nav-pills nav-justified">
                <li role="presentation"
                        ng-repeat="step in m.steps"
                        ng-init="num = $index+1"
                        ng-class="m.stepClass(step)">
                    <a href="#"
                            ng-click="m.openDialog(step)">{{:: num }}. {{:: step.shortTitle }}</a>
                    <span class="chevron" ng-if=":: num < 4"></span>
                </li>
            </ul>
            <ps-progress valuenow="m.progress()" data-style="'success'"></ps-progress>
        </nav>
    </div>
    <!--Title / edit-->
    <div class="row" ng-controller="ProjectTitleCtrl as m">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <h3 class="page-title pull-left project-title" ng-show="!m.editTitle.show">
                <span class="glyphicon glyphicon-dashboard"></span>
                <a href ng-click="m.toggleEditTitleDlg(true)">{{m.title.value}}</a>
                <span class="glyphicon glyphicon-edit hover-edit"></span>
            </h3>
        </div>
        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
            <form name="m.form" class="edit-form" ng-show="m.editTitle.show">
                <div class="form-group">
                    <textarea class="form-control vert" ng-model="m.editTitle.value"
                            required
                            ps-focus-on="m.editTitle.show"
                            ps-select="true"></textarea>
                </div>
                <button class="btn btn-success"
                        ng-disabled="m.form.$invalid"
                        ng-click="m.updateProjectTitle()">Save
                </button>
                <button type="button" class="btn close" ng-click="m.toggleEditTitleDlg(false)">
                    <span aria-hidden="true">&times;</span><span class="sr-only">Close</span>
                </button>
            </form>
        </div>
    </div>

    <!--Tiles-->
    <div class="row">
        <div ng-if="m.isReached(2)" ui-view="step2"></div>
        <div ng-if="m.isReached(3)" ui-view="step3"></div>
        <div ng-if="m.isReached(4)" ui-view="step4"></div>
    </div>

    <!--Dialog-->
    <div ui-view></div>

    <!--DBG-->
    <div class="row">
        <pre>
          $state = {{$state.current.name}}
          $stateParams = {{$stateParams}}
          $state full url = {{ $state.$current.url.source }}
        </pre>
    </div>

    <div class="row debug" ng-init="dbg = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]">
        <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1" ng-repeat="it in dbg">
            <div class="col">{{it}}</div>
        </div>
    </div>
</div>
