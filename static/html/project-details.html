<div class="container-fluid" ng-controller="ProjectDetailsCtrl as cm">
    <!--Title-->
    <div class="row">
        <div class="col-xs-12">
            <h3 class="page-title toggle-edit text-center">
                <a class="toggle-value"
                        ui-sref=".essentials({edit: 'reasons'})"
                        data-placement="right"
                        ps-tooltip="cm.project.reasons">
                    {{ cm.project.title }}
                    <span class="fa fa-edit hover-edit"></span>
                </a>
            </h3>
        </div>
    </div>

    <div class="row">
        <!--Left side-bar-->
        <div class="col-xs-12 col-sm-2">
            <div class="row page-spacer side-bar">
                <!--Overview-->
                <div class="col-xs-6 col-sm-12">
                    <h4 class="toggle-edit">Overview</h4>
                    <ul class="sub-menu">
                        <li class="menu-item" ui-sref-active="active"><a ui-sref=".dashboard">Dashboard</a></li>
                        <li class="menu-item" ui-sref-active="active"><a ui-sref=".decisions">Decision Table</a></li>
                        <li class="menu-item" ui-sref-active="active"><a ui-sref=".notes">Notes</a></li>
                    </ul>
                    <hr class="hidden-xs">
                    <div class="page-spacer visible-xs-block"></div>
                </div>

                <!--Essentials-->
                <div class="col-xs-6 col-sm-12">
                    <h4 class="menu-item" ui-sref-active="active">
                        <a class="toggle-value" ui-sref=".essentials({})">Essentials</a>
                    </h4>
                    <ul>
                        <!--Budget-->
                        <li ng-if="cm.project.budget.amount">
                            <a class="side-text ellipsis"
                                    ui-sref=".essentials({edit: 'budget'})"
                                    ps-tooltip="cm.sidebar.amountText()">
                                {{ cm.sidebar.amountText() }}
                            </a>
                        </li>
                        <!--Resources-->
                        <li ng-if="cm.project.notes.resources">
                            <a class="side-text ellipsis"
                                    ui-sref=".essentials({edit: 'resources'})"
                                    ps-tooltip="cm.project.notes.resources">
                                {{ cm.project.notes.resources }}
                            </a>
                        </li>
                        <!--Time frame-->
                        <li ng-if="cm.project.time.duration || cm.project.time.startDate">
                            <a class="side-text ellipsis"
                                    ui-sref=".essentials({edit: cm.project.time.duration && 'duration' || 'startDate'})"
                                    ps-tooltip="cm.sidebar.dateDurationText()">
                                {{ cm.sidebar.dateDurationText() }}
                            </a>
                        </li>
                    </ul>
                    <hr class="hidden-xs">
                    <div class="page-spacer visible-xs-block"></div>
                </div>

                <div class="clearfix visible-xs-block"></div>

                <!--Products-->
                <div class="col-xs-6 col-sm-12">
                    <h4 class="menu-item" ui-sref-active="active">
                        <a class="toggle-value" ui-sref=".products">
                            Products
                            <div class="label label-primary"
                                    ng-if="(cm.products | filter:{selected: true}).length > 0"
                                    >{{ (cm.products | filter:{selected: true}).length }}</div>
                        </a>
                    </h4>
                    <ul class="animate-ease-right">
                        <li ng-repeat="product in cm.products | filter:{selected: true} | orderBy:'-popularity' | limitTo:5 track by product._id"
                                ps-tooltip=":: product.name">
                            <span class="side-text ellipsis">{{:: product.name }}</span>
                            <span class="pull-right" ng-if=":: !product.custom">{{:: product.popularity }}%</span>
                        </li>
                    </ul>
                    <hr class="hidden-xs">
                </div>

                <!--Criteria-->
                <div class="col-xs-6 col-sm-12">
                    <h4 class="menu-item" ui-sref-active="active">
                        <a class="toggle-value" ui-sref=".requirements">
                            Criteria
                            <div class="label label-primary"
                                    ng-if="(cm.requirements | filter:{selected: true}).length > 0"
                                    >{{ (cm.requirements | filter:{selected: true}).length }}</div>
                        </a>
                    </h4>
                    <ul class="animate-ease-right">
                        <li ng-repeat="req in cm.requirements | filter:{selected: true} | orderBy:'-popularity' | limitTo:10 track by req._id"
                                ps-tooltip=":: req.name">
                            <span class="side-text ellipsis">{{:: req.name }}</span>
                            <span class="pull-right" ng-if=":: !req.custom">{{:: req.popularity }}%</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <!--Center Col: content-->
        <div class="col-xs-12 col-sm-10" ui-view></div>
    </div>
</div>
