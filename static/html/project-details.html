<div class="container-fluid">
    <div class="row">
        <!--Left side-bar: Summary-->
        <div class="col-xs-12 col-sm-2">
            <!--Title-->
            <h3 class="page-title toggle-edit">
                <a href class="toggle-value"
                        ng-click="cm.openEditDialog('title')"
                        data-placement="right"
                        ps-tooltip
                        ps-tooltip-title="cm.project.description"
                        >
                    <span class="glyphicon glyphicon-info-sign"></span>
                    {{ cm.project.title }}
                    <span class="glyphicon glyphicon-edit hover-edit"></span>
                </a>
            </h3>
            <ul>
                <!--Budget-->
                <li ng-if="cm.project.budget">
                    Budget:
                    <a href ng-click="cm.openEditDialog('budget')">
                        {{ cm.project.budget }}
                    </a>
                </li>
                <!--Resources-->
                <li ng-if="cm.project.budget">
                    Resources:
                    <a href ng-click="cm.openEditDialog('budget')">
                        {{ cm.project.budget }}
                    </a>
                </li>
                <!--Time frame-->
                <li ng-if="cm.project.startDate || cm.project.duration">
                    Time frame:
                    <a href ng-click="cm.openEditDialog('startDate')">
                        {{ cm.project.startDate }}
                    </a>
                </li>
            </ul>
            <hr>

            <h4>Products</h4>
            <ul>
                <li ng-repeat="product in cm.products">
                    <a href>{{ product.name }}</a>
                </li>
            </ul>
            <hr>

            <h4>Criteria</h4>
            <ul>
                <li ng-repeat="req in cm.requirements">
                    <a href>{{ req.title }}</a>
                </li>
            </ul>
        </div>

        <!--Center Col-->
        <div class="col-xs-12 col-sm-10">
            <!--MainTable-->
            <div class="row">
                <div class="col-xs-12 page-spacer" ng-controller="ProjectTableCtrl as cm">
                    <div class="tile-section border">
                        <ps-table-view ps-view="cm.tableView"></ps-table-view>
                    </div>
                </div>
            </div>
            <!--Summary / Notes-->
            <div class="row">
                <!--Summary / Recommendations-->
                <div class="col-xs-12 col-sm-6 tile-container">
                    <div class="panel panel-default tile">
                        <div class="panel-body">
                            <ps-edit-inline
                                    data-label="Summary"
                                    data-model="cm.fields.summary"
                                    data-on-save="cm.updateField(cm.fields.summary)"></ps-edit-inline>
                            <ps-edit-inline
                                    data-label="Recommendations"
                                    data-model="cm.fields.recommendations"
                                    data-on-save="cm.updateField(cm.fields.recommendations)"></ps-edit-inline>
                        </div>
                    </div>
                </div>
                <!--Notes-->
                <div class="col-xs-12 col-sm-6 tile-container">
                    <div class="panel panel-default tile">
                        <div class="panel-body">
                            <ps-edit-inline
                                    data-label="Notes"
                                    data-model="cm.fields.notes"
                                    data-on-save="cm.updateField(cm.fields.notes)"></ps-edit-inline>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--Dialog-->
    <div ui-view></div>

    <!--DBG-->
    <div class="row debug">
        <pre class="col-xs-12">
          $state = {{$state.current.name}}
          $stateParams = {{$stateParams}}
          $state full url = {{ $state.$current.url.source }}
        </pre>
    </div>
</div>
