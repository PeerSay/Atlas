<div class="table-responsive selection-list border">
    <table class="table table-hover table-striped no-select">
        <thead>
        <tr>
            <th class="min"></th>
            <th colspan="2" class="main">Name</th>
            <th>Description</th>
            <th class="min center">Mandatory</th>
            <th class="min center">Popularity</th>
            <th class="min"><span class="fa fa-fw fa-edit"></span></th>
            <th class="min"><span class="fa fa-fw fa-trash"></span></th>
        </tr>
        </thead>
        <!--Groups list-->
        <tbody ng-repeat="group in cm.groups.list | orderBy:'-popularity'">
        <!--Topic row-->
        <tr ng-show="group.name && cm.showFilteredGroup(group)"
                ng-class="{selected: group.selected}"
                ng-click="cm.toggleGroup(group, true)">
            <td>
                <input type="checkbox"
                        ng-model="group.selected"
                        ng-change="cm.toggleGroup(group)"
                        ng-click="$event.stopPropagation()">
            </td>
            <td colspan="2" class="bold"><strong>{{:: group.name }}</strong></td>
            <td>{{:: group.description }}</td>
            <td></td>
            <td class="center">
                <div ng-if="!group.custom"
                        title="{{:: group.popularity }}%"
                        ps-tooltip>
                    <ps-progress value="group.popularity"></ps-progress>
                </div>
            </td>
            <td></td>
            <td></td>
        </tr>
        <!--Criteria list-->
        <tr ng-repeat="req in group.reqs | filter:cm.filter.expr | orderBy:'-popularity' | limitTo:group.paging.limit track by req._id"
                ng-class="{selected: req.selected}"
                ng-click="cm.toggleReq(req, true)">
            <td></td>
            <td class="min">
                <input type="checkbox"
                        ng-model="req.selected"
                        ng-change="cm.toggleReq(req)"
                        ng-click="$event.stopPropagation()"
                        ps-focus-on="req.selected">
            </td>
            <td>{{ req.name }}</td>
            <td>{{ req.description }}</td>
            <td class="center">
                <span class="fa fa-check" ng-if="req.mandatory && req.selected"></span>
            </td>
            <td class="center">
                <div ng-if="!req.custom"
                        title="{{:: req.popularity }}%"
                        ps-tooltip>
                    <ps-progress value="req.popularity"></ps-progress>
                </div>
            </td>
            <td>
                        <span class="fa fa-fw fa-edit table-icon" ng-if="req.selected || req.custom"
                                ng-click="cm.edit.init(req); $event.stopPropagation()"></span>
            </td>
            <td>
                        <span class="fa fa-fw fa-trash table-icon" ng-if="req.selected || req.custom"
                                ng-click="cm.removeLocalReq(req); $event.stopPropagation()"></span>
            </td>
        </tr>
        <!--Paging: more/less-->
        <tr ng-if="!group.paging.disabled()">
            <td colspan="8" class="text-center">
                <button type="button" class="btn btn-xs btn-default"
                        ng-click="group.paging.showLess()"
                        ng-disabled="group.paging.disableShowLess">
                    Show Less
                </button>
                <button type="button" class="btn btn-xs btn-default"
                        ng-click="group.paging.showMore()"
                        ng-disabled="group.paging.disableShowMore">
                    Show More
                    <span ng-if="group.paging.hiddenItems()">({{ group.paging.hiddenItems() }})</span>
                </button>
            </td>
        </tr>
        </tbody>
        <tfoot>
        <!--Empty list-->
        <tr class="empty-table-content"
                ng-if="!cm.loadingMore && cm.isEmptyTable()">
            <td colspan="8" class="text-center">
                <span class="fa fa-info-circle"></span>
                <h4>Couldn't find anything.</h4>
                <p>
                    Please choose another filter or
                    <a href ng-click="cm.toggleFilter('all')">show all</a>.
                </p>
            </td>
        </tr>
        <!--Load more-->
        <tr ng-if="cm.loadingMore">
            <td colspan="8" class="text-center">
                <button type="button" class="btn btn-xxs btn-default load-more loading"
                        disabled>
                    <span class="fa fa-refresh fa-spin"></span>
                </button>
            </td>
        </tr>
        </tfoot>
    </table>
</div>
