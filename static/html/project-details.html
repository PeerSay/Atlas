<div class="container-fluid">
    <!--Title-->
    <div class="row">
        <div class="col-xs-12">
            <h3 class="page-title toggle-edit">
                <a class="toggle-value"
                        ui-sref=".essentials({edit: 'reasons'})"
                        data-placement="right"
                        ps-tooltip
                        ps-tooltip-title="cm.project.reasons">
                    <span class="fa fa-cubes"></span>
                    {{ cm.project.title }}
                    <span class="fa fa-edit hover-edit"></span>
                </a>
            </h3>
        </div>
    </div>

    <div class="row">
        <!--Left side-bar-->
        <div class="col-xs-12 col-sm-2">
            <!--Overview-->
            <h4>Overview</h4>
            <ul>
                <li>
                    <a ui-sref=".dashboard">Dashboard</a>
                </li>
                <li>
                    <a ui-sref=".decisions">Decision Table</a>
                </li>
            </ul>
            <hr>

            <!--Essentials-->
            <h4 class="toggle-edit">
                <a class="toggle-value" ui-sref=".essentials({})">
                    Essentials <span class="fa fa-edit hover-edit"></span>
                </a>
            </h4>
            <ul>
                <!--Budget-->
                <li ng-if="cm.project.resources.budget">
                    <span class="fa fa-fw fa-{{ cm.project.resources.budgetCurrency | lowercase }}"></span>
                    <a class="side-text ellipsis"
                            ui-sref=".essentials({edit: 'budget'})">
                        {{ cm.project.resources.budget }}
                    </a>
                </li>
                <!--Resources-->
                <li ng-if="cm.project.resources.description">
                    <span class="fa fa-fw fa-users"></span>
                    <a class="side-text ellipsis"
                            ui-sref=".essentials({edit: 'resources'})">
                        {{ cm.project.resources.description }}
                    </a>
                </li>
                <!--Time frame-->
                <li ng-if="cm.project.time.duration || cm.project.time.startDate">
                    <span class="fa fa-fw fa-clock-o"></span>
                    <a class="side-text ellipsis"
                            ui-sref=".essentials({edit: cm.project.time.duration && 'duration' || 'startDate'})">
                        <span ng-if="cm.project.time.duration" >
                            {{ cm.project.time.duration }} {{ cm.project.time.durationLabel }}
                        </span>
                        <span ng-if="cm.project.time.startDate">
                            @ {{ cm.project.time.startDate }}
                        </span>
                    </a>
                </li>
            </ul>
            <hr>

            <!--Products-->
            <h4 class="toggle-edit">
                <a class="toggle-value" ui-sref=".products">
                    Products <span class="fa fa-edit hover-edit"></span>
                </a>
            </h4>
            <ul class="animate-ease-right">
                <li ng-repeat="product in cm.products | filter:{selected: true} | orderBy:'-popularity' track by product.id">
                    <span class="side-text ellipsis">{{ product.name }}</span>
                </li>
            </ul>
            <hr>

            <!--Criteria-->
            <h4 class="toggle-edit">
                <a class="toggle-value" ui-sref=".requirements">
                    Criteria <span class="fa fa-edit hover-edit"></span>
                </a>
            </h4>
            <ul class="animate-ease-right">
                <li ng-repeat="req in cm.requirements | filter:{selected: true} | orderBy:'-popularity' track by req.id">
                    <span class="side-text ellipsis">{{ req.name }}</span>
                </li>
            </ul>
        </div>

        <!--Center Col: content-->
        <div class="col-xs-12 col-sm-10" ui-view></div>
    </div>

    <!--DBG-->
    <div class="row debug">
        <pre class="col-xs-12">
          $state = {{$state.current.name}}
          $stateParams = {{$stateParams}}
          $state full url = {{ $state.$current.url.source }}
        </pre>
    </div>
</div>
