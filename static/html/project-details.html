<div class="container-fluid" ng-controller="ProjectDetailsCtrl as cm">
    <!--Title-->
    <div class="row">
        <div class="col-xs-12 col-sm-2">
            <a ui-sref="project.list" class="logo">
                <img height="30" src="/images/logo-horiz-126x30.png" alt="Logo">
            </a>
        </div>
        <div class="col-xs-12 col-sm-10 col-lg-8">
            <h3 class="page-title toggle-edit text-center">
                <a class="toggle-value"
                        ui-sref=".essentials({edit: 'reasons'})"
                        data-placement="right"
                        ps-tooltip
                        ps-tooltip-title="cm.project.reasons">
                    <span class="fa fa-cubes"></span>
                    {{ cm.project.title }}
                    <span class="fa fa-edit hover-edit"></span>
                </a>
            </h3>
        </div>
    </div>

    <div class="row">
        <!--Left side-bar-->
        <div class="col-xs-12 col-sm-2">
            <div class="row page-spacer side-bar">
                <!--Overview-->
                <div class="col-xs-6 col-sm-12">
                    <h4 class="toggle-edit">
                        <a class="toggle-value" ui-sref=".dashboard">
                            Overview <span class="fa fa-edit hover-edit"></span>
                        </a>
                    </h4>
                    <ul class="menu">
                        <li ui-sref-active="active"><a ui-sref=".dashboard">Dashboard</a></li>
                        <li ui-sref-active="active"><a ui-sref=".decisions">Decision Table</a></li>
                    </ul>
                    <hr class="hidden-xs">
                    <div class="page-spacer visible-xs-block"></div>
                </div>

                <!--Essentials-->
                <div class="col-xs-6 col-sm-12">
                    <h4 class="toggle-edit" ui-sref-active="active">
                        <a class="toggle-value" ui-sref=".essentials({})">
                            Essentials <span class="fa fa-edit hover-edit"></span>
                        </a>
                    </h4>
                    <ul>
                        <!--Budget-->
                        <li ng-if="cm.project.budget.amount">
                            <a class="side-text ellipsis"
                                    ui-sref=".essentials({edit: 'budget'})">
                                {{ cm.project.budget.amount }}
                                {{ cm.project.budget.amountMultiplier }}
                            </a>
                        </li>
                        <!--Resources-->
                        <li ng-if="cm.project.notes.resources">
                            <a class="side-text ellipsis"
                                    ui-sref=".essentials({edit: 'resources'})">
                                {{ cm.project.notes.resources }}
                            </a>
                        </li>
                        <!--Time frame-->
                        <li ng-if="cm.project.time.duration || cm.project.time.startDate">
                            <a class="side-text ellipsis"
                                    ui-sref=".essentials({edit: cm.project.time.duration && 'duration' || 'startDate'})">
                                <span ng-if="cm.project.time.duration" >
                                    {{ cm.project.time.duration }} {{ cm.project.time.durationLabel }}
                                </span>
                                <span ng-if="cm.project.time.startDate">
                                    @ {{ cm.project.time.startDate }}
                                </span>
                            </a>
                        </li>
                    </ul>
                    <hr class="hidden-xs">
                    <div class="page-spacer visible-xs-block"></div>
                </div>

                <div class="clearfix visible-xs-block"></div>

                <!--Products-->
                <div class="col-xs-6 col-sm-12">
                    <h4 class="toggle-edit" ui-sref-active="active">
                        <a class="toggle-value" ui-sref=".products">
                            Products <span class="fa fa-edit hover-edit"></span>
                        </a>
                    </h4>
                    <ul class="animate-ease-right">
                        <li ng-repeat="product in cm.products | filter:{selected: true} | orderBy:'-popularity' track by product.id">
                            <span class="side-text ellipsis">{{ product.name }}</span>
                        </li>
                    </ul>
                    <hr class="hidden-xs">
                </div>

                <!--Criteria-->
                <div class="col-xs-6 col-sm-12">
                    <h4 class="toggle-edit" ui-sref-active="active">
                        <a class="toggle-value" ui-sref=".requirements">
                            Criteria <span class="fa fa-edit hover-edit"></span>
                        </a>
                    </h4>
                    <ul class="animate-ease-right">
                        <li ng-repeat="req in cm.requirements | filter:{selected: true} | orderBy:'-popularity' track by req.id">
                            <span class="side-text ellipsis">{{ req.name }}</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <!--Center Col: content-->
        <div class="col-xs-12 col-sm-10" ui-view></div>
    </div>

    <!--DBG-->
    <div class="row debug">
        <pre class="col-xs-12">
          $state = {{$state.current.name}}
          $stateParams = {{$stateParams}}
          $state full url = {{ $state.$current.url.source }}
        </pre>
    </div>
</div>
