<div ng-form="form" class="table-responsive">
    <table class="table" id="decision-table"
            ng-table="view.tableParams"
            >
        <!--Header-->
        <thead ng-if="view.rows.length">
        <tr>
            <th ng-repeat="col in view.columns" ng-class=":: col.header.class">
                <div>{{:: col.header.label }}</div>
            </th>
        </tr>
        </thead>
        <tbody ng-repeat="group in $groups"
                ng-init="groupObj = view.groups.get(group.value); group.$hideRows = true;">
        <!--Group row-->
        <tr class="ng-table-group"
                ng-show="group.value"
                ng-click="group.$hideRows = !group.$hideRows; $event.stopPropagation()">
            <td colspan="{{ group.$hideRows && 2 || view.columns.length }}">
                <a href tabindex="-1">
                    <span class="fa fa-fw" ng-class="{ 'fa-caret-right': group.$hideRows, 'fa-caret-down': !group.$hideRows }"></span>
                    {{:: group.value }}
                </a>
            </td>
            <!--Group weight-->
            <td class="strong center" ng-if="group.$hideRows">{{ groupObj.weight() }}%</td>
            <!--Group grades-->
            <td ng-if="group.$hideRows" ng-repeat-start="groupCol in groupObj.grades"></td>
            <td ng-if="group.$hideRows" ng-repeat-end class="strong grade">
                {{ groupCol.grade() }}
            </td>
        </tr>
        <!--Rows & cells-->
        <tr ng-hide="group.$hideRows" ng-repeat="row in group.data">
            <td class="cell" ng-repeat="cell in row.cells"
                    ng-class="[cell.type, cell.class]"
                    ng-class="{'winner' : cell.model.max()}"
                    ng-click="focusInputEl(cell)">
                <!--Label cell-->
                <div ng-if=":: cell.type === 'static' ">{{:: cell.label }}</div>
                <!--Text cell-->
                <div ng-if=":: cell.type === 'text' ">
                    <textarea class="cell-input noresize"
                            ng-model="cell.model.value"
                            ps-ctrl="view.ctrl"
                            ps-table-input="cell"
                            msd-elastic></textarea>
                </div>
                <!--Number cell-->
                <div ng-if=":: cell.type === 'number' ">
                    <input type="number" class="cell-input center"
                            min="0" max="{{:: cell.max }}"
                            ng-model="cell.model.value"
                            ps-ctrl="view.ctrl"
                            ps-table-input="cell"
                            ps-input-number
                            ps-tooltip="cell.model.tooltip()"
                            >
                </div>
                <!--Mandatory icon cell-->
                <div ng-if=":: cell.type === 'icon' ">
                    <span class="fa {{:: cell.label }}"></span>
                </div>
            </td>
        </tr>
        </tbody>
        <!--Footer-->
        <tfoot>
        <tr ng-if="view.rows.length">
            <th class="abs-container {{:: col.footer.class }}" ng-repeat="col in view.columns"
                    ng-class="{'winner' : col.footer.model.max()}">
                <!--Label cell-->
                <div ng-if=":: col.footer.type === 'static' ">{{:: col.footer.label }}</div>
                <!--Func cell-->
                <div ng-if=":: col.footer.type === 'func' ">
                    {{ col.footer.model.value() }}
                </div>
                <!--Winner cup-->
                <span class="fa fa-trophy winner-icon" ng-if="col.footer.model.max()"></span>
            </th>
        </tr>
        <!--Empty table row -->
        <tr class="empty-table-content"
                ng-if="!view.ctrl.loading && !view.rows.length">
            <td colspan="6" class="text-center">
                <span class="fa fa-info-circle"></span>
                <h4>Bummer, there's nothing to compare yet.</h4>
                <h3>
                    Please add
                    <a ui-sref="^.requirements">criteria</a> and
                    <a ui-sref="^.products">products</a>.
                </h3>
            </td>
        </tr>
        </tfoot>
    </table>
</div>
